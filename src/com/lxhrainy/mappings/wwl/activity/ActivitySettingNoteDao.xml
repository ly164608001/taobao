<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lxhrainy.myjz.admin.activity.dao.IActivitySettingNoteDao">
      
	<sql id="activitySettingNoteColumns">
		T.id AS "id",
		T.activityid AS "activityid",
		T.isapply AS "isapply",
		T.isremind AS "isremind",
		T.remindtime AS "remindtime",
		T.remindnum AS "remindnum"
	</sql>
	
	<select id="getById" resultType="ActivitySettingNote">
		SELECT 
			<include refid="activitySettingNoteColumns"/>
		FROM activity_setting_note T
	
		WHERE T.id = #{id}
	</select>
	
	<select id="findListByPage" resultType="ActivitySettingNote">
		SELECT 
			<include refid="activitySettingNoteColumns"/>
		FROM activity_setting_note T
	
		<if test="condition!=null">
			<where>
				<if test="condition.model!=null">
					<if test="condition.model.activityid!=null and condition.model.activityid!=''">
						T.activityid ='${condition.model.activityid}'
					</if>
				</if>
			</where>
			order by T.ID DESC
			<include refid="Sql.pager" />
		</if>
	</select>
	<select id="getCountByCondition" resultType="int">
		SELECT 
			count(*)
		FROM activity_setting_note T
		
		<if test="condition!=null">
			<where>
				<if test="condition.model!=null">
					<if test="condition.model.activityid!=null and condition.model.activityid!=''">
						T.activityid ='${condition.model.activityid}'
					</if>
				</if>
			</where>
		</if>
	</select>
	
	<select id="findAllList" resultType="ActivitySettingNote">
		SELECT 
			<include refid="activitySettingNoteColumns"/>
		FROM activity_setting_note T
		
		<where>
			<if test="condition!=null">
				<if test="condition.model!=null">
					<if test="condition.model.activityid!=null and condition.model.activityid!=''">
						T.activityid ='${condition.model.activityid}'
					</if>
				</if>
			</if>
		</where>		
	</select>
	
	<insert id="insert">
		INSERT INTO activity_setting_note (
		id,
		housesid,
		name, 
      	starttime,
       	endtime,
        createuser, 
      	createtime,
       	status,
        deleted
      )
    values (
    	#{id},
     	#{housesid},
     	#{name}, 
     	#{starttime},
     	#{endtime},
       	#{createuser.id}, 
      	#{createtime}, 
      	#{status},
       	#{deleted}
      )
		<!-- 配置Mysql主键自动增长 -->
		<selectKey resultType="int" keyProperty="id">
			select
			LAST_INSERT_ID() as value  
		</selectKey>
	</insert>
		
	 <update id="update" >
    update activity_setting_note
    <set >
      <if test="activityid != null" >
        activityid = #{activityid},
      </if>
      <if test="isapply != null" >
        isapply = #{isapply},
      </if>
      <if test="isremind != null" >
        isremind = #{isremind},
      </if>
      <if test="remindtime != null" >
        remindtime = #{remindtime},
      </if>
      <if test="remindnum != null" >
        remindnum = #{remindnum},
      </if>
    </set>
    where id = #{id}
  </update>
	
	<update id="updateIsapply">
		update activity_setting_note set isapply = #{isapply}
		WHERE id = #{id}
	</update>
</mapper>