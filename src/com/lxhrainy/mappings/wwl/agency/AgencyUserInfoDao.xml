<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lxhrainy.myjz.admin.agency.dao.IAgencyUserDao">
    
	<sql id="agencyUserInfoColumns">
		T.id AS "id",
		T.agencyid AS "agencyid",
		T.userid AS "userid",
		T.applytime AS "applytime",
		T.status AS "status",
		T.source AS "source",
		T.successtime AS "successtime",
		T.handleuserid AS "handleuserid",
		T.handletime AS "handletime",
		T.content AS "content",
		T.commissiontype AS "commissiontype",
		T.commissionvalue AS "commissionvalue",
		T.deleted AS "deleted"
	</sql>
	
	<sql id="agencyUserInfoJoins">
	</sql>
	
	<sql id="where">
		<if test="condition!=null">
			<where>
			    1 = 1 
				<if test="condition.model!=null">
					<if test="condition.model.deleted!=null">
						AND T.deleted = #{condition.model.deleted}
					</if>
				</if>
			</where>
		</if>
	</sql>
    
	<select id="getById" resultType="AgencyUserInfo">
		SELECT 
			<include refid="agencyUserInfoColumns"/>
		FROM agency_user_info T
		<include refid="agencyUserInfoJoins"/>
		WHERE T.id = #{id}
	</select>
	
	<select id="findListByPage" resultType="AgencyUserInfo">
		SELECT 
			<include refid="agencyUserInfoColumns"/>
		FROM agency_user_info T
		<include refid="agencyUserInfoJoins"/>
		<include refid="where"/>
		order by T.ID DESC
			<include refid="Sql.pager" />
	</select>
	
	<select id="findAllList" resultType="AgencyUserInfo">
		SELECT 
			<include refid="agencyUserInfoColumns"/>
		FROM agency_user_info T
		<include refid="agencyUserInfoJoins"/>
		<include refid="where"/>
	</select>
	
	<insert id="insert">
		INSERT INTO agency_user_info(
			id,
			agencyid,
			userid,
			applytime,
			status,
			source,
			successtime,
			handleuserid,
			handletime,
			content,
			commissiontype,
			commissionvalue,
			deleted
		) VALUES (
			#{id},
			#{agencyid},
			#{userid},
			#{applytime},
			#{status},
			#{source},
			#{successtime},
			#{handleuserid},
			#{handletime},
			#{content},
			#{commissiontype},
			#{commissionvalue},
			#{deleted}
		)
	</insert>
	
	<update id="update">
		UPDATE agency_user_info SET 	
			agencyid = #{agencyid},
			userid = #{userid},
			applytime = #{applytime},
			status = #{status},
			source = #{source},
			successtime = #{successtime},
			handleuserid = #{handleuserid},
			handletime = #{handletime},
			content = #{content},
			commissiontype = #{commissiontype},
			commissionvalue = #{commissionvalue},
			deleted = #{deleted}
		WHERE id = #{id}
	</update>
	
	<update id="deleteById">
		update agency_user_info set 
			deleted=1
		WHERE id = #{id}
	</update>
	
</mapper>