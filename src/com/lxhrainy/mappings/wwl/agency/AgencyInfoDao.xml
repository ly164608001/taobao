<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lxhrainy.myjz.admin.agency.dao.IAgencyDao">
    
	<sql id="agencyInfoColumns">
		T.id AS "id",
		T.title AS "title",
		T.type AS "type",
		T.commissiontype AS "commissiontype",
		T.commissionvalue AS "commissionvalue",
		T.agencystarttime AS "agencystarttime",
		T.agencyendtime AS "agencyendtime",
		T.housesid AS "housesid",
		T.publishuserid AS "publishuserid",
		T.publishtime AS "publishtime",
		T.housesnum AS "housesnum",
		T.status AS "status",
		T.deleted AS "deleted"
	</sql>
	
	<sql id="agencyInfoJoins">
	</sql>
	
	<sql id="where">
		<if test="condition!=null">
			<where>
			    1 = 1 
				<if test="condition.model!=null">
					<if test="condition.model.deleted!=null">
						AND T.deleted = #{condition.model.deleted}
					</if>
				</if>
			</where>
		</if>
	</sql>
    
	<select id="getById" resultType="AgencyInfo">
		SELECT 
			<include refid="agencyInfoColumns"/>
		FROM agency_info T
		<include refid="agencyInfoJoins"/>
		WHERE T.id = #{id}
	</select>
	
	<select id="findListByPage" resultType="AgencyInfo">
		SELECT 
			<include refid="agencyInfoColumns"/>
		FROM agency_info T
		<include refid="agencyInfoJoins"/>
		<include refid="where"/>
		order by T.ID DESC
			<include refid="Sql.pager" />
	</select>
	
	<select id="findAllList" resultType="AgencyInfo">
		SELECT 
			<include refid="agencyInfoColumns"/>
		FROM agency_info T
		<include refid="agencyInfoJoins"/>
		<include refid="where"/>
	</select>
	
	<insert id="insert">
		INSERT INTO agency_info(
			id,
			title,
			type,
			commissiontype,
			commissionvalue,
			agencystarttime,
			agencyendtime,
			housesid,
			publishuserid,
			publishtime,
			housesnum,
			status,
			deleted
		) VALUES (
			#{id},
			#{title},
			#{type},
			#{commissiontype},
			#{commissionvalue},
			#{agencystarttime},
			#{agencyendtime},
			#{housesid},
			#{publishuserid},
			#{publishtime},
			#{housesnum},
			#{status},
			#{deleted}
		)
	</insert>
	
	<update id="update">
		UPDATE agency_info SET 	
			title = #{title},
			type = #{type},
			commissiontype = #{commissiontype},
			commissionvalue = #{commissionvalue},
			agencystarttime = #{agencystarttime},
			agencyendtime = #{agencyendtime},
			housesid = #{housesid},
			publishuserid = #{publishuserid},
			publishtime = #{publishtime},
			housesnum = #{housesnum},
			status = #{status},
			deleted = #{deleted}
		WHERE id = #{id}
	</update>
	
	<update id="deleteById">
		update agency_info set 
			deleted=1
		WHERE id = #{id}
	</update>
	
</mapper>